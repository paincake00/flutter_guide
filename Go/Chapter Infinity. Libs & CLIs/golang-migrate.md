
tutorial postgres: https://github.com/golang-migrate/migrate/blob/master/database/postgres/TUTORIAL.md

##### –ó–∞—á–µ–º –Ω—É–∂–µ–Ω:

- **üìÅ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏**  
	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç (`up`) –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç (`down`) SQL-—Ñ–∞–π–ª—ã –ø–æ –≤–µ—Ä—Å–∏–∏ –∏ –ø–æ—Ä—è–¥–∫—É.

- **üî¢ –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î**  
    –°–ª–µ–¥–∏—Ç –∑–∞ —Ç–µ–∫—É—â–µ–π –º–∏–≥—Ä–∞—Ü–∏–µ–π –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –≤ –ë–î (`schema_migrations`), –Ω–µ –¥–∞—ë—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏.

- **üîÑ –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π**  
    –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –ª—é–±—É—é –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é (–∫–æ–º–∞–Ω–¥–∞¬†`down`,¬†`force`,¬†`goto`¬†–∏ —Ç.–¥.).

- **üì¶ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CI/CD –∏ Go-–∫–æ–¥–æ–º**  
    –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CLI –∏–ª–∏ Go API ‚Äî —É–¥–æ–±–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –≤ –¥–µ–ø–ª–æ–π/—Ç–µ—Å—Ç—ã.

- **üß™ –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**  
    –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ, –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è —Ä—É—á–Ω–æ–π —Ö–∞–æ—Å.

- **‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**  
    –ú–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å: –ª–æ–∫–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ HTTP, —á–µ—Ä–µ–∑ —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã, —Å AWS S3 –∏ —Ç.–¥.

- **üß∞ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–∏—Ö –°–£–ë–î**  
    –†–∞–±–æ—Ç–∞–µ—Ç —Å PostgreSQL, MySQL, SQLite, MSSQL –∏ –¥—Ä.

### Workshop

```
brew install golang-migrate
```

```sh
migrate create -ext sql -dir db/migrations -seq create_users_table
```

–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –≤ `db/migrations`:
- `000001_create_users_table.down.sql`
- `000001_create_users_table.up.sql`

–ù–∞–ø–∏—à–µ–º –¥–ª—è `up.sql`:
```sql
CREATE TABLE IF NOT EXISTS users(
	user_id serial PRIMARY KEY,
	username VARCHAR (50) UNIQUE NOT NULL,
	password VARCHAR (50) NOT NULL,
	email VARCHAR (300) UNIQUE NOT NULL 
);
```

–í `down.sql`:
```sql
DROP TABLE IF EXISTS users;
```

–ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–æ–π:
```sh
migrate -path db/migrations \
  -database "postgres://myuser:mypass@localhost:5432/mydb?sslmode=disable" \
  up
```

