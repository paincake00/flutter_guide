
### I. Codebase

Приложение должно иметь единую кодовую базу, а сторонние приложения подключать как библиотеки через Dependency manager.
Но деплоев (запущенных экземпляров приложения) может быть несколько. Для разработки (dev), тестирования (staging), продакшена (prod).

### II. Dependencies

Зависимости должны объявляться явно. Можно использовать манифесты.

### III. Config

Конфиги должны храниться в переменных среды (env), а не в коде в виде констант.

### IV. Backing Services

Не должно быть различия в обращении к ресурсам/услугам, хоть они локальные, хоть являются third-party сервисами.
Должен единообразный интерфейс, чтобы можно переключать ресурс (условно, с локального MySQL на удаленный AmazonRDS).

### V. Build, Release and Run

3 этапа должны быть разделены:
- build - этап сборки, где происходит преобразование репозитория в сборку, для которой компилируются бинарники/ассеты, поставляются зависимости.
- release - этап релиза объединяет сборку с конфигами для конкретного деплоя. Полная готовность к запуску.
- run (runtime) - этап запуска, в котором приложение запускается в среде выполнения, реализуя некоторый набор процессов приложения против выбранного выпуска.

### VI. Processes

Приложение исполняется одним или несколькими процессами, которые не имеют состояния (то есть не полагаются на кэш или файловую систему, которые могут быть очищены при перезапуске). Все данные сохраняются в backing services (БД, облака, независимые хранилища и т.д.).

### VII. Port Binding

Принцип Port Binding означает, что приложение само поднимает сервер и слушает указанный порт, а не зависит от внешнего веб‑сервера. Это позволяет взаимодействовать с ним как с Backing Service другим приложениям.

### VIII. Concurrency

Принцип Concurrency означает масштабирование приложения горизонтально за счёт запуска нескольких независимых процессов разных типов, а не увеличением ресурсов одного процесса.

![[Pasted image 20250801182031.png|500]]

### IX. Disposability

Для повышения надежности и отказоустойчивости запущенные процессы приложения должны наиболее быстро запускаться (fast startup) и идеально завершаться (graceful shutdown).

### X. Dev/Prod parity

Держите разработку (dev), постановку (staging) и производство (prod) как можно более похожими за счет непрерывного развертывания (continuous deployment), чтобы после написания нового кода можно было его сразу развернуть.

### XI. Logs

Приложение не управляет файлами логов, а пишет события в stdout как непрерывный поток, который окружение собирает и обрабатывает. 
Ответственность за сбор, хранение и маршрутизацию логов перекладывается на платформу (систему развёртывания, облачный сервис).

### XII. Admin processes

Административные задачи (миграции, консоли, одноразовые скрипты) должны запускаться как одноразовые процессы в том же окружении и с теми же зависимостями, что и основные процессы приложения.